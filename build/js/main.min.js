$(function(){var t;768<$(window).width()&&(t=0,$(window).scroll(function(){var e=$(this).scrollTop();t<e?$(".menu").addClass("hide"):$(".menu").removeClass("hide"),t=e})),$(".menu__btn").click(function(e){e.preventDefault(),$(".full-menu").toggleClass("full-menu--open")}),$(document).click(function(e){$(".menu__btn").is(e.target)||$(".full-menu").is(e.target)||0!==$(".full-menu").has(e.target).length||$(".full-menu").removeClass("full-menu--open")}),$(window).keydown(function(e){27===e.keyCode&&(e.preventDefault(),$(".full-menu").removeClass("full-menu--open"))}),$(window).width()<=768&&($(".menu__btn").click(function(e){$("body").toggleClass("overflow-h")}),$(".full-menu__cat").click(function(e){e.preventDefault(),$(this).hasClass("active")?($(this).removeClass("active"),$(".full-menu__list").find(".full-menu__cat").show(),$(".full-menu__sublist").find(".full-menu__link").show(),$(".full-menu .site-nav").show()):($(".full-menu__list").find(".full-menu__cat").not(this).hide(),$(".full-menu .site-nav").hide(),$(".full-menu__list").find(".active").removeClass("active"),$(this).addClass("active"))}),$(".full-menu__link").click(function(e){$(this).next().is("ul")&&(e.preventDefault(),$(this).hasClass("active")?($(this).removeClass("active"),$(".full-menu__link").show()):($(".full-menu__link").not(this).hide(),$(".full-menu__sublist").find(".active").removeClass("active"),$(this).addClass("active")))})),$(".site-nav__btn").click(function(e){e.preventDefault(),$(".site-nav").toggleClass("site-nav--open")});$("#search").autocomplete({source:["Смартфон Apple iPhone 7 32GB (3 товара)","Смартфон Apple iPhone 7 128GB (2 товара)","Смартфон Apple iPhone 7 Plus 32GB (золотой)","Смартфон Apple iPhone 8 Plus 64GB (серебряный)","Смартфон Apple iPhone 8 Plus 128GB (3 товара)","Смартфон Apple iPhone 8 128GB (3 товара)"],autoFocus:!0}),$(".header__tel").mouseover(function(e){e.preventDefault(),$(".popup--about-tel").addClass("popup--open")}),$(document).mouseover(function(e){$(".header__tel").is(e.target)||0!==$(".header__tel").has(e.target).length||$(".popup--about-tel").is(e.target)||0!==$(".popup--about-tel").has(e.target).length||$(".popup--about-tel").removeClass("popup--open")}),$('[data-toggle="popup"],[data-toggle="modal"]').click(function(e){e.preventDefault(),$(".popup").removeClass("popup--open"),$(".modal").removeClass("modal--open");var t=$(this).attr("data-toggle"),o=$(this).attr("data-target");"popup"==t&&$("."+o).addClass("popup--open"),"modal"==t&&$("."+o).addClass("modal--open")}),$(document).click(function(e){var t=$('[data-toggle="popup"], [data-toggle="modal"]'),o=$(".popup--open, .modal--open");t.is(e.target)||o.is(e.target)||0!==o.has(e.target).length||o.removeClass("popup--open").removeClass("modal--open"),1==$(".popup--delivery-pickup, .popup--delivery-city, .popup--delivery-city-all").hasClass("popup--open")?$("body").addClass("overflow-h"):$("body").removeClass("overflow-h")}),$(".popup__close").click(function(e){e.preventDefault(),$("body").removeClass("overflow-h"),$(this).parents(".modal").removeClass("modal--open"),$(this).parents(".popup").removeClass("popup--open")}),$(".main__card-gallery").slick({autoplay:!0,slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!1,lazyLoad:"progressive"}),$(".main__benefit").mouseover(function(e){e.preventDefault(),$(this).find(".popup").addClass("popup--open")}),$(document).mouseover(function(e){$(".main__benefit").is(e.target)||0!==$(".main__benefit").has(e.target).length||$(".popup--benefit").removeClass("popup--open")}),$(".about-shop__brands").slick({slidesToShow:6,slidesToScroll:3,dots:!0,lazyLoad:"progressive",responsive:[{breakpoint:1200,settings:{arrows:!1,slidesToShow:3,slidesToScroll:3}}]}),$(".catalog__tag").click(function(e){e.preventDefault(),$(this).toggleClass("active"),$(".catalog__tag-reset").removeClass("hide")}),$(".catalog__tag-reset .btn").click(function(e){e.preventDefault(),$(".catalog__tag-reset").addClass("hide"),$(".catalog__tag").removeClass("active")}),$(".filter__title").click(function(e){e.preventDefault(),$(this).parent().toggleClass("active")}),$(".filter__clear").click(function(e){e.preventDefault(),$(this).parent(".filter").find("input").prop("checked",!1).val("")}),$(".filters__clear").click(function(e){e.preventDefault(),$(this).parent(".filters").find("input").prop("checked",!1).val("")}),$(".filter__show-more").click(function(e){e.preventDefault(),$(this).find(".show-more").toggle(),$(this).parent().find(".hidden").toggleClass("show")}),$(window).width()<=768&&($(".filters").addClass("popup"),$(".filters-btn").click(function(e){e.preventDefault(),$("body").addClass("overflow-h"),$(".filters").addClass("popup--open")})),$(".product-big-photo").magnificPopup({delegate:"a",type:"image",tLoading:"Загрузка #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1],tCounter:""},image:{tError:'<a href="%url%">Изображение не загрузилось'}}),$(".product-big-photo").slick({asNavFor:".product-small-photos",dots:!1,responsive:[{breakpoint:480,dots:!0}]}),$(".product-small-photos").slick({slidesToShow:3,slidesToScroll:1,centerMode:!0,centerPadding:0,focusOnSelect:!0,asNavFor:".product-big-photo",responsive:[{breakpoint:480,settings:"unslick"}]}),$(".product-votes").click(function(){$(".product-tab-btn").removeClass("active"),$(".product-tab-btn--responds").addClass("active")}),$(".product-tab-btn").click(function(e){e.preventDefault(),$(this).parent().find(".active").removeClass("active"),$(this).addClass("active")}),768<$(window).width()&&$(".product-tab-btn:first-child").addClass("active"),$(window).width()<=768&&($(".product-tab").addClass("popup"),$(".product-tab-btn").click(function(e){$("body").addClass("overflow-h")}),$(".product-tab .popup__close").click(function(e){$(".product-tab-btn").removeClass("active")})),768<$(window).width()&&($(".popup__buttons").slick({slidesToShow:5,vertical:!0,variableWidth:!0,focusOnSelect:!0,asNavFor:".popup__info-list"}),$(".popup__info-list").slick({arrows:!1,slidesToShow:1,variableWidth:!0,focusOnSelect:!0,asNavFor:".popup__buttons"}),$(".pickup__buttons").slick({slidesToShow:5,vertical:!0,variableWidth:!0,focusOnSelect:!0,asNavFor:".pickup__info-list"}),$(".pickup__info-list").slick({arrows:!1,slidesToShow:1,focusOnSelect:!0,asNavFor:".pickup__buttons"})),$(window).width()<=768&&($(".pickup__info-item").addClass("popup"),$(".pickup__buttons .button").click(function(e){e.preventDefault(),$("body").addClass("overflow-h");var t=$(this).attr("id");$("."+t).addClass("popup--open")})),$(".dropdown-toggle").click(function(e){e.preventDefault(),$(this).toggleClass("dropdown-toggle--open")}),$(".dropdown-menu li").click(function(e){e.preventDefault();var t=$(this).text();$(this).parents(".dropdown").find(".dropdown-toggle").text(t),$(".dropdown-menu li").removeClass("active"),$(this).addClass("active"),$(".dropdown-toggle").removeClass("dropdown-toggle--open")}),$(".cart-spinner").spinner({min:1,max:10}),$(".cart-remove").click(function(e){e.preventDefault(),$(this).parents(".cart-table-row").remove()}),$(".catalog-fav-clear").click(function(e){e.preventDefault(),$(".catalog-fav .product-item").remove(),$(".pagination").remove(),$(".button--more").remove()}),$(".input").on("input",function(){$(this).val()?$(this).removeClass("input-empty"):$(this).addClass("input-empty")}),$(".tabs-delivery input[name='delivery-type']").on("change",function(){$(".tabs-method, .fields-address").addClass("d-none"),"pickup-spb"==$(this).val()?$(".field-pickup").removeClass("d-none"):$(".field-pickup").addClass("d-none"),"delivery-spb"==$(this).val()?$(".tabs-city").removeClass("d-none"):$(".tabs-city").addClass("d-none"),"delivery-rus"==$(this).val()?$(".tabs-city-all").removeClass("d-none"):$(".tabs-city-all").addClass("d-none")}),$(".search-help a, .delivery-city").click(function(e){e.preventDefault();var t=$(this).text();"Санкт-Петербург"==t&&$(".order-our-courier").removeClass("d-none"),$(".select-city, .search-city").val(t).removeClass("input-empty"),$("body").removeClass("overflow-h"),$(".tabs-method").removeClass("d-none"),$(".popup--delivery-city").removeClass("popup--open")}),$(".tabs-method input[name='city-delivery-type']").on("change",function(){$("[value='our-courier'],[value='cdek-courier']").is(":checked")&&($(".field-pickup").addClass("d-none"),$(".fields-address").removeClass("d-none")),$("[value='pickup']").is(":checked")&&($(".fields-address").addClass("d-none"),$(".field-pickup").removeClass("d-none"))}),$(".pickup__button").click(function(){var e=$(this).find(".pickup__button-address").text();$(".select-pickup").removeClass("input-empty").val(e),$(".select-pickup-address").removeClass("d-none").empty(),$(this).clone().appendTo(".select-pickup-address"),$(".order-total").removeClass("d-none"),$(".buton-confirm").removeAttr("disabled"),$(".popup--delivery-pickup").removeClass("popup--open")}),$(window).width()<=768&&$(".pickup__button").click(function(){$(".button.select-pickup").removeClass("d-none"),$(".field-pickup .order-field").addClass("d-none")}),$(".tabs-view input[name='view-type']").on("change",function(){$("[value='list']").is(":checked")&&($(".pickup__info").addClass("d-none"),$(".pickup__list").removeClass("d-none")),$("[value='map']").is(":checked")&&($(".pickup__list").addClass("d-none"),$(".pickup__info").removeClass("d-none"))}),$(".order__btn-cart").click(function(e){e.preventDefault(),$(this).toggleClass("open"),1==$(this).hasClass("open")?$(".popup--cart").removeClass("popup--open"):$(".popup--cart").addClass("popup--open")}),$(".pickup__photos").magnificPopup({delegate:"a",type:"image",tLoading:"Загрузка #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1],tCounter:""},image:{tError:'<a href="%url%">Изображение #%curr%</a> не загрузилось'}})});